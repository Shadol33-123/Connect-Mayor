import{h as m,m as u,u as h,b as f,j as e,B as l,s as j}from"./index-DNQbeVAn.js";import{C as p}from"./Card-BcRLNdqC.js";function b(){m();const{data:t,isLoading:i,error:n,markRead:c,markAllRead:o,unreadCount:x}=u(),{user:a}=h(),r=f({queryKey:["friend-requests-pending-count"],queryFn:async()=>{if(!a)return{count:0};const{data:s,error:d}=await j.from("friend_requests").select("id",{count:"exact",head:!0}).eq("receiver_id",a.id).eq("status","pending");if(d)throw d;return{count:(s==null?void 0:s.length)||0}},staleTime:15e3,enabled:!!a});return e.jsxs("div",{className:"p-6 max-w-3xl mx-auto",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Notificaciones"}),x>0&&e.jsx(l,{variant:"secondary",onClick:()=>o(),children:"Marcar todas"})]}),i&&e.jsx("div",{children:"Cargando..."}),n&&e.jsx("div",{className:"text-red-600",children:n.message}),r.data&&r.data.count>0&&e.jsxs("div",{className:"mb-4 text-sm px-3 py-2 rounded-lg bg-yellow-50 border border-yellow-200 text-yellow-800",children:["Tienes ",r.data.count," solicitud(es) de amistad pendiente(s)."]}),e.jsxs("div",{className:"space-y-3",children:[t==null?void 0:t.map(s=>e.jsx(p,{className:"flex flex-col gap-2 "+(s.read_at?"opacity-60":""),children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm mb-1",children:s.title}),s.body&&e.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:s.body}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:new Date(s.created_at).toLocaleString()})]}),!s.read_at&&e.jsx(l,{variant:"secondary",onClick:()=>c(s.id),children:"Marcar le√≠do"})]})},s.id)),(t==null?void 0:t.length)===0&&!i&&e.jsx("div",{className:"text-center text-slate-500",children:"No tienes notificaciones."})]})]})}export{b as default};
