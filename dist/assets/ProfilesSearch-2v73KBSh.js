import{r as i,b as u,j as e,L as c,R as x,s as m}from"./index-DNQbeVAn.js";import{C as d}from"./Card-BcRLNdqC.js";import{S as p}from"./Skeleton-CGa9HBs8.js";import{R as f}from"./RankBadge-B6GHI0D6.js";import"./ProgressBar-DsJwVye4.js";function _(){const[t,l]=i.useState(""),a=h(t,400),{data:r,isLoading:o}=u({queryKey:["profiles-search",a],queryFn:async()=>{if(!a)return[];const{data:s,error:n}=await m.from("users_profile").select("user_id, username, display_name, total_xp, show_progress").or(`username.ilike.%${a}%,display_name.ilike.%${a}%`).order("total_xp",{ascending:!1}).limit(20);if(n)throw n;return s||[]}});return e.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-10",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Buscar perfiles"}),e.jsx("input",{type:"text",value:t,onChange:s=>l(s.target.value),placeholder:"Buscar por usuario o nombre",className:"w-full px-4 py-2 border rounded-xl mb-6 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsxs("div",{className:"space-y-2",children:[o&&e.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((s,n)=>e.jsx(p,{className:"h-20 w-full rounded-xl"},n))}),!o&&(r==null?void 0:r.length)===0&&a&&e.jsx("p",{className:"text-sm text-slate-500",children:"Sin resultados."}),r==null?void 0:r.map(s=>e.jsxs(d,{className:"p-4 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs(c,{to:`/u/${s.username}`,className:"font-semibold text-blue-600 hover:underline",children:["@",s.username]}),e.jsx("span",{className:"text-xs text-slate-500",children:s.display_name||"â€”"})]}),s.show_progress?e.jsx(f,{xp:s.total_xp}):e.jsx("span",{className:"text-xs text-slate-400",children:"Progreso oculto"})]},s.user_id))]})]})}function h(t,l){const[a,r]=i.useState(t);return x.useEffect(()=>{const o=setTimeout(()=>r(t),l);return()=>clearTimeout(o)},[t,l]),a}export{_ as default};
