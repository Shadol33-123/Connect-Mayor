import{s as o}from"./index-DNQbeVAn.js";async function d(t,a=50){const{data:{user:s},error:n}=await o.auth.getUser();if(n)throw n;if(!s)throw new Error("No autenticado");const{data:e,error:r}=await o.from("lesson_progress").insert({user_id:s.id,lesson_id:t,xp_earned:a}).select("*").single();if(r)throw r;return e}async function l(){const{data:{user:t}}=await o.auth.getUser();if(!t)return[];const{data:a,error:s}=await o.from("lesson_progress").select("id,user_id,lesson_id,completed_at,xp_earned,lessons(title)").eq("user_id",t.id).order("completed_at",{ascending:!1});if(s)throw s;return(a??[]).map(e=>{var r;return{id:e.id,user_id:e.user_id,lesson_id:e.lesson_id,completed_at:e.completed_at,xp_earned:e.xp_earned,lesson_title:((r=e.lessons)==null?void 0:r.title)??null}})}export{d as c,l as g};
